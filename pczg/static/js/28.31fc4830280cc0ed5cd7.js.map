{"version":3,"sources":["webpack:///./src/utils/permission.js","webpack:///src/views/permission/page.vue","webpack:///./src/views/permission/page.vue?dff1","webpack:///./src/views/permission/page.vue"],"names":["__WEBPACK_IMPORTED_MODULE_0__store__","__webpack_require__","checkPermission","value","Array","length","permissionRoles","store","getters","roles","some","role","includes","console","error","page","name","components","SwitchRoles","switchRoles","methods","handleRolesChange","val","this","$message","showClose","message","type","$router","push","path","permission_page","render","_h","$createElement","_c","_self","staticClass","on","change","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"qDAAA,IAAAA,EAAAC,EAAA,QAsBeC,IAnBS,SAAAC,GACtB,GAAIA,GAASA,aAAiBC,OAASD,EAAME,OAAS,EAAG,CACvD,IACMC,EAAkBH,EAMxB,SAPcI,IAAMC,SAAWD,IAAMC,QAAQC,OAGjBC,KAAK,SAAAC,GAC/B,OAAOL,EAAgBM,SAASD,KASlC,OADAE,QAAQC,MAAR,yDACO,uGCRXC,cACAC,KAAA,iBACAC,YAAAC,YAAAC,EAAA,SACAC,SACAC,kBADA,SACAC,GACA,UAAAA,IACAC,KAAAC,UACAC,WAAA,EACAC,QAAA,sBACAC,KAAA,YAEAJ,KAAAK,QAAAC,MACAC,KAAA,oBCnBeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbV,KAAaW,eAA0BC,EAAvCZ,KAAuCa,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,gBAAqBG,IAAIC,OAArIhB,KAAqIF,sBAAgC,IAE9KmB,oBCYjBC,EAdyBxC,EAAQ,OAcjCyC,CACE3B,EACAgB,GATF,EAEA,KAEA,KAEA,MAUeY,EAAA,QAAAF,EAAiB","file":"static/js/28.31fc4830280cc0ed5cd7.js","sourcesContent":["import store from '@/store'\r\n\r\n// 传进来的 value 值为权限允许的角色组成的数组，例如['admin', 'djlun']\r\nconst checkPermission = value => {\r\n  if (value && value instanceof Array && value.length > 0) {\r\n    const roles = store.getters && store.getters.roles\r\n    const permissionRoles = value\r\n\r\n    const hasPermission = roles.some(role => {\r\n      return permissionRoles.includes(role)\r\n    })\r\n\r\n    if (!hasPermission) {\r\n      return false\r\n    }\r\n    return true\r\n  } else {\r\n    console.error(`need roles! Like v-permission=\"['admin','editor']\"`)\r\n    return false\r\n  }\r\n}\r\n\r\nexport default checkPermission\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/permission.js","<template>\r\n  <div class=\"app-container\">\r\n    <switch-roles @change=\"handleRolesChange\"></switch-roles>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SwitchRoles from './components/switchRoles'\r\nimport checkPermission from '@/utils/permission'\r\n\r\nexport default {\r\n  name: 'pagePermission',\r\n  components: { SwitchRoles },\r\n  methods: {\r\n    handleRolesChange(val) {\r\n      if (val !== 'admin') {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '你没有访问此页面的权限，已跳转至首页。',\r\n          type: 'warning'\r\n        })\r\n        this.$router.push({\r\n          path: '/dashboard'\r\n        })\r\n      }\r\n      // this.$router.push({\r\n      //   path: '/permission/index?' + +new Date()\r\n      // })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/permission/page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('switch-roles',{on:{\"change\":_vm.handleRolesChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-caf2f44e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/permission/page.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-caf2f44e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/permission/page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}