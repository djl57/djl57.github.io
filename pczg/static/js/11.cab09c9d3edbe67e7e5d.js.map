{"version":3,"sources":["webpack:///./src/utils/permission.js","webpack:///./src/directive/permission/permission.js","webpack:///./src/directive/permission/index.js","webpack:///src/views/permission/directive.vue","webpack:///./src/views/permission/directive.vue?d6eb","webpack:///./src/views/permission/directive.vue"],"names":["__WEBPACK_IMPORTED_MODULE_0__store__","__webpack_require__","checkPermission","value","Array","length","permissionRoles","store","getters","roles","some","role","includes","console","error","permission","inserted","el","binding","vnode","Error","parentNode","removeChild","install","Vue","directive","window","use","name","components","SwitchRoles","switchRoles","directives","directive_permission","data","key","methods","utils_permission","handleRolesChange","this","permission_directive","render","_vm","_h","$createElement","_c","_self","staticClass","on","change","_v","rawName","expression","attrs","size","type","_m","staticStyle","width","label","_e","staticRenderFns","margin-top","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.cab09c9d3edbe67e7e5d.js","sourcesContent":["import store from '@/store'\r\n\r\n// 传进来的 value 值为权限允许的角色组成的数组，例如['admin', 'djlun']\r\nconst checkPermission = value => {\r\n  if (value && value instanceof Array && value.length > 0) {\r\n    const roles = store.getters && store.getters.roles\r\n    const permissionRoles = value\r\n\r\n    const hasPermission = roles.some(role => {\r\n      return permissionRoles.includes(role)\r\n    })\r\n\r\n    if (!hasPermission) {\r\n      return false\r\n    }\r\n    return true\r\n  } else {\r\n    console.error(`need roles! Like v-permission=\"['admin','editor']\"`)\r\n    return false\r\n  }\r\n}\r\n\r\nexport default checkPermission\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/permission.js","import store from '@/store'\r\n\r\n// el：指令所绑定的元素，可以用来直接操作 DOM 。\r\n// binding：一个对象，包含以下属性：\r\n  // name：指令名，不包括 v- 前缀。\r\n  // value：指令的绑定值，例如：v-my-directive=\"1 + 1\" 中，绑定值为 2。\r\n  // oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。\r\n  // expression：字符串形式的指令表达式。例如 v-my-directive=\"1 + 1\" 中，表达式为 \"1 + 1\"。\r\n  // arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 \"foo\"。\r\n  // modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。\r\n// vnode：Vue 编译生成的虚拟节点。移步 VNode API 来了解更多详情。\r\n// oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\r\n\r\nexport default {\r\n  inserted(el, binding, vnode) {\r\n    const { value } = binding\r\n    const roles = store.getters && store.getters.roles // 当前权限\r\n    if (value && value instanceof Array && value.length > 0) {\r\n      const permissionRoles = value\r\n\r\n      const hasPermission = roles.some(role => {\r\n        return permissionRoles.includes(role)\r\n      })\r\n\r\n      if (!hasPermission) {\r\n        el.parentNode && el.parentNode.removeChild(el)\r\n      }\r\n    } else {\r\n      throw new Error(`need roles! Like v-permission=\"['admin','editor']\"`)\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/permission/permission.js","import permission from './permission'\r\n\r\nconst install = (Vue) => {\r\n  Vue.directive('permission', permission)\r\n}\r\n\r\nif (window.Vue) {\r\n  window['permission'] = permission\r\n  Vue.use(install); // eslint-disable-line\r\n}\r\n\r\npermission.install = install\r\n\r\nexport default permission\n\n\n// WEBPACK FOOTER //\n// ./src/directive/permission/index.js","<template>\r\n  <div class=\"app-container\">\r\n    <switch-roles @change=\"handleRolesChange\" />\r\n    <div :key=\"key\">\r\n      <div>\r\n        <span v-permission=\"['admin']\" class=\"permission-alert\">\r\n          Only\r\n          <el-tag class=\"permission-tag\" size=\"small\">admin</el-tag>\r\n          can see this :\r\n        </span>\r\n        <el-tag v-permission=\"['admin']\" class=\"permission-sourceCode\" type=\"info\">\r\n          v-permission=\"['admin']\"\r\n        </el-tag>\r\n      </div>\r\n\r\n      <div>\r\n        <span v-permission=\"['djlun']\" class=\"permission-alert\">\r\n          Only\r\n          <el-tag class=\"permission-tag\" size=\"small\">djlun</el-tag>\r\n          can see this :\r\n        </span>\r\n        <el-tag v-permission=\"['djlun']\" class=\"permission-sourceCode\" type=\"info\">\r\n          v-permission=\"['djlun']\"\r\n        </el-tag>\r\n      </div>\r\n\r\n      <div>\r\n        <span v-permission=\"['admin','djlun']\" class=\"permission-alert\">\r\n          Both\r\n          <el-tag class=\"permission-tag\" size=\"small\">admin</el-tag> and\r\n          <el-tag class=\"permission-tag\" size=\"small\">djlun</el-tag>\r\n          can see this :\r\n        </span>\r\n        <el-tag v-permission=\"['admin','djlun']\" class=\"permission-sourceCode\" type=\"info\">\r\n          v-permission=\"['admin','djlun']\"\r\n        </el-tag>\r\n      </div>\r\n    </div>\r\n\r\n    <div :key=\"'checkPermission'+key\">\r\n      <code style=\"margin-top:20px;\">\r\n        在某些情况下，不适合使用 v-permission。例如：Element-UI 的 Tab 组件或 el-table-column 以及其它动态渲染 dom 的场景。只能通过手动设置 v-if 来实现。\r\n        <br> e.g.\r\n      </code>\r\n\r\n      <el-tabs type=\"border-card\" style=\"width:550px;\">\r\n        <el-tab-pane v-if=\"checkPermission(['admin'])\" label=\"Admin\">\r\n          Admin can see this\r\n          <el-tag class=\"permission-sourceCode\" type=\"info\">\r\n            v-if=\"checkPermission(['admin'])\"\r\n          </el-tag>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane v-if=\"checkPermission(['djlun'])\" label=\"Djlun\">\r\n          Djlun can see this\r\n          <el-tag class=\"permission-sourceCode\" type=\"info\">\r\n            v-if=\"checkPermission(['djlun'])\"\r\n          </el-tag>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane v-if=\"checkPermission(['admin','djlun'])\" label=\"Admin-OR-Djlun\">\r\n          Both admin or djlun can see this\r\n          <el-tag class=\"permission-sourceCode\" type=\"info\">\r\n            v-if=\"checkPermission(['admin','editor'])\"\r\n          </el-tag>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport permission from '@/directive/permission/index'\r\nimport SwitchRoles from './components/switchRoles'\r\nimport checkPermission from '@/utils/permission'\r\n\r\nexport default {\r\n  name: 'DirectivePermission',\r\n  components: { SwitchRoles },\r\n  directives: { permission },\r\n  data() {\r\n    return {\r\n      key: 1\r\n    }\r\n  },\r\n  methods: {\r\n    checkPermission,\r\n    handleRolesChange() {\r\n      this.key++\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.app-container {\r\n  .permission-alert {\r\n    display: inline-block;\r\n    width: 320px;\r\n    margin-top: 15px;\r\n    background-color: #ffffff;\r\n    color: #67c23a;\r\n    padding: 8px 16px;\r\n    border-radius: 4px;\r\n  }\r\n  .permission-sourceCode {\r\n    margin: 10px 0 0 15px;\r\n  }\r\n  .permission-tag {\r\n    background-color: #ecf5ff;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/permission/directive.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('switch-roles',{on:{\"change\":_vm.handleRolesChange}}),_vm._v(\" \"),_c('div',{key:_vm.key},[_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin']),expression:\"['admin']\"}],staticClass:\"permission-alert\"},[_vm._v(\"\\n        Only\\n        \"),_c('el-tag',{staticClass:\"permission-tag\",attrs:{\"size\":\"small\"}},[_vm._v(\"admin\")]),_vm._v(\"\\n        can see this :\\n      \")],1),_vm._v(\" \"),_c('el-tag',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin']),expression:\"['admin']\"}],staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n        v-permission=\\\"['admin']\\\"\\n      \")])],1),_vm._v(\" \"),_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['djlun']),expression:\"['djlun']\"}],staticClass:\"permission-alert\"},[_vm._v(\"\\n        Only\\n        \"),_c('el-tag',{staticClass:\"permission-tag\",attrs:{\"size\":\"small\"}},[_vm._v(\"djlun\")]),_vm._v(\"\\n        can see this :\\n      \")],1),_vm._v(\" \"),_c('el-tag',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['djlun']),expression:\"['djlun']\"}],staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n        v-permission=\\\"['djlun']\\\"\\n      \")])],1),_vm._v(\" \"),_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin','djlun']),expression:\"['admin','djlun']\"}],staticClass:\"permission-alert\"},[_vm._v(\"\\n        Both\\n        \"),_c('el-tag',{staticClass:\"permission-tag\",attrs:{\"size\":\"small\"}},[_vm._v(\"admin\")]),_vm._v(\" and\\n        \"),_c('el-tag',{staticClass:\"permission-tag\",attrs:{\"size\":\"small\"}},[_vm._v(\"djlun\")]),_vm._v(\"\\n        can see this :\\n      \")],1),_vm._v(\" \"),_c('el-tag',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin','djlun']),expression:\"['admin','djlun']\"}],staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n        v-permission=\\\"['admin','djlun']\\\"\\n      \")])],1)]),_vm._v(\" \"),_c('div',{key:'checkPermission'+_vm.key},[_vm._m(0),_vm._v(\" \"),_c('el-tabs',{staticStyle:{\"width\":\"550px\"},attrs:{\"type\":\"border-card\"}},[(_vm.checkPermission(['admin']))?_c('el-tab-pane',{attrs:{\"label\":\"Admin\"}},[_vm._v(\"\\n        Admin can see this\\n        \"),_c('el-tag',{staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n          v-if=\\\"checkPermission(['admin'])\\\"\\n        \")])],1):_vm._e(),_vm._v(\" \"),(_vm.checkPermission(['djlun']))?_c('el-tab-pane',{attrs:{\"label\":\"Djlun\"}},[_vm._v(\"\\n        Djlun can see this\\n        \"),_c('el-tag',{staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n          v-if=\\\"checkPermission(['djlun'])\\\"\\n        \")])],1):_vm._e(),_vm._v(\" \"),(_vm.checkPermission(['admin','djlun']))?_c('el-tab-pane',{attrs:{\"label\":\"Admin-OR-Djlun\"}},[_vm._v(\"\\n        Both admin or djlun can see this\\n        \"),_c('el-tag',{staticClass:\"permission-sourceCode\",attrs:{\"type\":\"info\"}},[_vm._v(\"\\n          v-if=\\\"checkPermission(['admin','editor'])\\\"\\n        \")])],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('code',{staticStyle:{\"margin-top\":\"20px\"}},[_vm._v(\"\\n      在某些情况下，不适合使用 v-permission。例如：Element-UI 的 Tab 组件或 el-table-column 以及其它动态渲染 dom 的场景。只能通过手动设置 v-if 来实现。\\n      \"),_c('br'),_vm._v(\" e.g.\\n    \")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-68e487cc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/permission/directive.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68e487cc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./directive.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directive.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directive.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-68e487cc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./directive.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-68e487cc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/permission/directive.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}